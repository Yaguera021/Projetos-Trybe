{"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/product.controller.ts":{"path":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/product.controller.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":26},"end":{"line":6,"column":81}},"4":{"start":{"line":7,"column":24},"end":{"line":7,"column":74}},"5":{"start":{"line":9,"column":41},"end":{"line":9,"column":49}},"6":{"start":{"line":10,"column":21},"end":{"line":10,"column":89}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":38}},"8":{"start":{"line":14,"column":29},"end":{"line":14,"column":69}},"9":{"start":{"line":15,"column":4},"end":{"line":15,"column":71}},"10":{"start":{"line":17,"column":0},"end":{"line":20,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"create","decl":{"start":{"line":8,"column":15},"end":{"line":8,"column":21}},"loc":{"start":{"line":8,"column":32},"end":{"line":12,"column":1}},"line":8},"2":{"name":"getAll","decl":{"start":{"line":13,"column":15},"end":{"line":13,"column":21}},"loc":{"start":{"line":13,"column":32},"end":{"line":16,"column":1}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":2,"1":1,"2":1},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/product.controller.ts","sources":["/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/product.controller.ts"],"names":[],"mappings":";;;;;AACA,kFAAyD;AACzD,2EAAmD;AAEnD,KAAK,UAAU,MAAM,CAAC,GAAY,EAAE,GAAa;IAC/C,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;IAC9C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,yBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;IAE3E,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpC,CAAC;AAED,KAAK,UAAU,MAAM,CAAC,GAAY,EAAE,GAAa;IAC/C,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,MAAM,yBAAc,CAAC,MAAM,EAAE,CAAC;IAEvD,OAAO,GAAG,CAAC,MAAM,CAAC,IAAA,uBAAa,EAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACtD,CAAC;AAED,kBAAe;IACb,MAAM;IACN,MAAM;CACP,CAAC","sourcesContent":["import { Request, Response } from 'express';\nimport productService from '../services/product.service';\nimport mapStatusHTTP from '../utils/mapStatusHTTP';\n\nasync function create(req: Request, res: Response): Promise<Response> {\n  const { id, name, price, orderId } = req.body;\n  const { data } = await productService.create({ id, name, price, orderId });\n\n  return res.status(201).json(data);\n}\n\nasync function getAll(req: Request, res: Response): Promise<Response> {\n  const { data, status } = await productService.getAll();\n\n  return res.status(mapStatusHTTP(status)).json(data);\n}\n\nexport default {\n  create,\n  getAll,\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fbcb21cd93b3450142b31c437d03b03dc31602bf"},"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/product.service.ts":{"path":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/product.service.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":24},"end":{"line":6,"column":84}},"4":{"start":{"line":8,"column":23},"end":{"line":8,"column":68}},"5":{"start":{"line":9,"column":4},"end":{"line":12,"column":6}},"6":{"start":{"line":15,"column":21},"end":{"line":15,"column":60}},"7":{"start":{"line":16,"column":25},"end":{"line":16,"column":70}},"8":{"start":{"line":16,"column":51},"end":{"line":16,"column":69}},"9":{"start":{"line":17,"column":4},"end":{"line":20,"column":6}},"10":{"start":{"line":22,"column":0},"end":{"line":25,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"create","decl":{"start":{"line":7,"column":15},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":31},"end":{"line":13,"column":1}},"line":7},"2":{"name":"getAll","decl":{"start":{"line":14,"column":15},"end":{"line":14,"column":21}},"loc":{"start":{"line":14,"column":24},"end":{"line":21,"column":1}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":16,"column":38},"end":{"line":16,"column":39}},"loc":{"start":{"line":16,"column":51},"end":{"line":16,"column":69}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":3,"9":1,"10":1},"f":{"0":1,"1":1,"2":1,"3":3},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/product.service.ts","sources":["/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/product.service.ts"],"names":[],"mappings":";;;;;AAAA,qFAA4D;AAI5D,KAAK,UAAU,MAAM,CAAC,OAAqB;IACzC,MAAM,UAAU,GAAG,MAAM,uBAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IAEtD,OAAO;QACL,MAAM,EAAE,YAAY;QACpB,IAAI,EAAE,UAAU,CAAC,UAAU;KAC5B,CAAC;AACJ,CAAC;AAED,KAAK,UAAU,MAAM;IACnB,MAAM,QAAQ,GAAG,MAAM,uBAAY,CAAC,OAAO,EAAE,CAAC;IAE9C,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;IAEnE,OAAO;QACL,MAAM,EAAE,YAAY;QACpB,IAAI,EAAE,YAAY;KACnB,CAAC;AACJ,CAAC;AAED,kBAAe;IACb,MAAM;IACN,MAAM;CACP,CAAC","sourcesContent":["import ProductModel from '../database/models/product.model';\nimport { Product, ProductOptId } from '../types/Product';\nimport { ServiceResponse } from '../types/ServiceResponse';\n\nasync function create(product: ProductOptId): Promise<ServiceResponse<Product>> {\n  const newProduct = await ProductModel.create(product);\n\n  return {\n    status: 'SUCCESSFUL',\n    data: newProduct.dataValues,\n  };\n}\n\nasync function getAll(): Promise<ServiceResponse<Product[]>> {\n  const products = await ProductModel.findAll();\n\n  const productsData = products.map((product) => product.dataValues);\n\n  return {\n    status: 'SUCCESSFUL',\n    data: productsData,\n  };\n}\n\nexport default {\n  create,\n  getAll,\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5e9c25b6a87864c429de540f524ac87e2ad29638"},"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/order.controller.ts":{"path":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/order.controller.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":24},"end":{"line":6,"column":77}},"4":{"start":{"line":8,"column":19},"end":{"line":8,"column":60}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":40}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"listOrders","decl":{"start":{"line":7,"column":15},"end":{"line":7,"column":25}},"loc":{"start":{"line":7,"column":37},"end":{"line":10,"column":1}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{"0":1,"1":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/order.controller.ts","sources":["/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/order.controller.ts"],"names":[],"mappings":";;;;;AACA,8EAAqD;AAErD,KAAK,UAAU,UAAU,CAAC,IAAa,EAAE,GAAa;IACpD,MAAM,MAAM,GAAG,MAAM,uBAAY,CAAC,SAAS,EAAE,CAAC;IAC9C,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACtC,CAAC;AAED,kBAAe,EAAE,UAAU,EAAE,CAAC","sourcesContent":["import { Request, Response } from 'express';\nimport orderService from '../services/order.service';\n\nasync function listOrders(_req: Request, res: Response): Promise<Response> {\n  const orders = await orderService.getOrders();\n  return res.status(200).json(orders);\n}\n\nexport default { listOrders };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2afffe032e9e43f9a3f9ed2058d4767bf1e5b2c0"},"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/order.service.ts":{"path":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/order.service.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":20},"end":{"line":6,"column":57}},"4":{"start":{"line":7,"column":22},"end":{"line":7,"column":80}},"5":{"start":{"line":8,"column":24},"end":{"line":8,"column":84}},"6":{"start":{"line":10,"column":19},"end":{"line":19,"column":6}},"7":{"start":{"line":20,"column":4},"end":{"line":20,"column":18}},"8":{"start":{"line":22,"column":0},"end":{"line":22,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"getOrders","decl":{"start":{"line":9,"column":15},"end":{"line":9,"column":24}},"loc":{"start":{"line":9,"column":27},"end":{"line":21,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":3,"1":1},"b":{"0":[1,1,1],"1":[2,1],"2":[3,3]},"inputSourceMap":{"version":3,"file":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/order.service.ts","sources":["/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/order.service.ts"],"names":[],"mappings":";;;;;AAAA,0DAAkC;AAClC,iFAAiF;AACjF,qFAA4D;AAE5D,KAAK,UAAU,SAAS;IACtB,MAAM,MAAM,GAAG,MAAM,qBAAU,CAAC,OAAO,CAAC;QACtC,OAAO,EAAE,EAAE,KAAK,EAAE,uBAAY,EAAE,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,EAAE;QAClE,UAAU,EAAE;YACV,IAAI;YACJ,QAAQ;YACR,CAAC,mBAAS,CAAC,EAAE,CAAC,eAAe,EAAE,mBAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,EAAE,YAAY,CAAC;SAC9E;QACD,GAAG,EAAE,IAAI;QACT,KAAK,EAAE,CAAC,IAAI,CAAC;KACd,CAAC,CAAC;IACH,OAAO,MAAM,CAAC;AAChB,CAAC;AACD,kBAAe,EAAE,SAAS,EAAE,CAAC","sourcesContent":["import Sequelize from 'sequelize';\nimport OrderModel, { OrderSequelizeModel } from '../database/models/order.model';\nimport ProductModel from '../database/models/product.model';\n\nasync function getOrders(): Promise<OrderSequelizeModel[]> {\n  const orders = await OrderModel.findAll({\n    include: { model: ProductModel, as: 'productIds', attributes: [] },\n    attributes: [\n      'id',\n      'userId',\n      [Sequelize.fn('JSON_ARRAYAGG', Sequelize.col('productIds.id')), 'productIds'],\n    ],\n    raw: true,\n    group: ['id'],\n  });\n  return orders;\n}\nexport default { getOrders };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"db3168c1310fe15ee08a0959d9e5c8bf68899fc6"},"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/login.controller.ts":{"path":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/login.controller.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":24},"end":{"line":6,"column":77}},"4":{"start":{"line":7,"column":24},"end":{"line":7,"column":74}},"5":{"start":{"line":9,"column":35},"end":{"line":9,"column":43}},"6":{"start":{"line":10,"column":4},"end":{"line":12,"column":5}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":91}},"8":{"start":{"line":13,"column":26},"end":{"line":13,"column":85}},"9":{"start":{"line":14,"column":4},"end":{"line":14,"column":99}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"login","decl":{"start":{"line":8,"column":15},"end":{"line":8,"column":20}},"loc":{"start":{"line":8,"column":31},"end":{"line":15,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":10,"column":4},"end":{"line":12,"column":5}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":12,"column":5}},{"start":{"line":10,"column":4},"end":{"line":12,"column":5}}],"line":10},"4":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":94}},"type":"binary-expr","locations":[{"start":{"line":10,"column":8},"end":{"line":10,"column":17}},{"start":{"line":10,"column":21},"end":{"line":10,"column":30}},{"start":{"line":10,"column":34},"end":{"line":10,"column":62}},{"start":{"line":10,"column":66},"end":{"line":10,"column":94}}],"line":10}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":2,"6":2,"7":0,"8":2,"9":2,"10":1},"f":{"0":2,"1":2},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2],"3":[0,2],"4":[2,2,2,2]},"inputSourceMap":{"version":3,"file":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/login.controller.ts","sources":["/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/controllers/login.controller.ts"],"names":[],"mappings":";;;;;AACA,8EAAqD;AACrD,2EAAkD;AAElD,KAAK,UAAU,KAAK,CAAC,GAAY,EAAE,GAAa;IAC9C,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;IAExC,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,IAAI,OAAO,QAAQ,KAAK,QAAQ,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;QAC1F,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,wCAAwC,EAAE,CAAC,CAAC;KACpF;IAED,MAAM,aAAa,GAAG,MAAM,uBAAY,CAAC,KAAK,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC;IACvE,OAAO,GAAG,CAAC,MAAM,CAAC,IAAA,uBAAY,EAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AACjF,CAAC;AAED,kBAAe,EAAE,KAAK,EAAE,CAAC","sourcesContent":["import { Request, Response } from 'express';\nimport loginService from '../services/login.service';\nimport mapSatusHTTP from '../utils/mapStatusHTTP';\n\nasync function login(req: Request, res: Response): Promise<Response> {\n  const { username, password } = req.body;\n\n  if (!username || !password || typeof username !== 'string' || typeof password !== 'string') {\n    return res.status(400).json({ message: '\"username\" and \"password\" are required' });\n  }\n\n  const loginResponse = await loginService.login({ username, password });\n  return res.status(mapSatusHTTP(loginResponse.status)).json(loginResponse.data);\n}\n\nexport default { login };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a25b562a5416df12b9943cf366d086ca6d7da467"},"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/login.service.ts":{"path":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/login.service.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":19},"end":{"line":7,"column":64}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":78}},"6":{"start":{"line":10,"column":20},"end":{"line":10,"column":94}},"7":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":93}},"9":{"start":{"line":14,"column":35},"end":{"line":14,"column":53}},"10":{"start":{"line":15,"column":18},"end":{"line":15,"column":65}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":53}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"login","decl":{"start":{"line":9,"column":15},"end":{"line":9,"column":20}},"loc":{"start":{"line":9,"column":27},"end":{"line":17,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},{"start":{"line":11,"column":4},"end":{"line":13,"column":5}}],"line":11},"4":{"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":95}},"type":"binary-expr","locations":[{"start":{"line":11,"column":8},"end":{"line":11,"column":16}},{"start":{"line":11,"column":20},"end":{"line":11,"column":95}}],"line":11}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":2,"7":2,"8":2,"9":0,"10":0,"11":0,"12":1},"f":{"0":3,"1":2},"b":{"0":[1,1,1],"1":[2,1],"2":[3,3],"3":[2,0],"4":[2,1]},"inputSourceMap":{"version":3,"file":"/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/login.service.ts","sources":["/home/yago/Trybe-Projetos/Back-End/Trybe-Projeto-07/sd-031-b-project-trybesmith/src/services/login.service.ts"],"names":[],"mappings":";;;;;AAAA,wDAA8B;AAC9B,iEAAoC;AACpC,+EAAsD;AAKtD,KAAK,UAAU,KAAK,CAAC,IAAa;IAChC,MAAM,OAAO,GAAG,MAAM,oBAAS,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IAChF,IAAI,CAAC,OAAO,IAAI,CAAC,kBAAM,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;QAC/E,OAAO,EAAE,MAAM,EAAE,cAAc,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,8BAA8B,EAAE,EAAE,CAAC;KACtF;IAED,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,OAAO,CAAC,UAAU,CAAC;IAClD,MAAM,KAAK,GAAG,kBAAG,CAAC,IAAI,CACpB,EAAE,QAAQ,EAAE,QAAQ,EAAE,CACvB,CAAC;IACF,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC;AACnD,CAAC;AAED,kBAAe,EAAE,KAAK,EAAE,CAAC","sourcesContent":["import bcrypt from 'bcryptjs';\nimport jwt from '../utils/jwt.util';\nimport UserModel from '../database/models/user.model';\nimport { LogUser } from '../types/LogUser';\nimport { ServiceResponse } from '../types/ServiceResponse';\nimport { Token } from '../types/Token';\n\nasync function login(user: LogUser): Promise<ServiceResponse<Token>> {\n  const getUser = await UserModel.findOne({ where: { username: user.username } });\n  if (!getUser || !bcrypt.compareSync(user.password, getUser.dataValues.password)) {\n    return { status: 'UNAUTHORIZED', data: { message: 'Username or password invalid' } };\n  }\n\n  const { username, password } = getUser.dataValues;\n  const token = jwt.sign(\n    { username, password },\n  );\n  return { status: 'SUCCESSFUL', data: { token } };\n}\n\nexport default { login };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c6553a70bdbca348255b2fd62b7794ad6fb24117"}}